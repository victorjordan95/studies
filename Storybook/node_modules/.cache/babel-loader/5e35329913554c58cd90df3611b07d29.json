{"ast":null,"code":"import { useEffect, useState, useRef, useCallback } from \"react\";\nimport axios from 'axios';\nexport const useSearch = (query = '', limit = 10) => {\n  const [state, setState] = useState({\n    articles: [],\n    status: 'IDLE',\n    error: ''\n  });\n  const cancelToken = useRef(null);\n  useEffect(() => {\n    if (query.length < 3) {\n      return;\n    }\n\n    if (cancelToken.current) {\n      cancelToken.current.cancel();\n    }\n\n    cancelToken.current = axios.CancelToken.source();\n    setState({ ...state,\n      status: 'PENDING'\n    });\n    axios.get(`https://en.wikipedia.org/w/api.php?origin=*&action=opensearch&search=${query}&limit=${limit}`, {\n      cancelToken: cancelToken.current.token\n    }).then(function (response) {\n      const parsedResponse = [];\n\n      for (let i = 0; i < response.data[1].length; i++) {\n        parsedResponse.push({\n          id: response.data[3][i],\n          label: response.data[1][i]\n        });\n      }\n\n      setState({\n        articles: parsedResponse,\n        status: 'SUCCESS',\n        error: ''\n      });\n    }).catch(function (error) {\n      if (axios.isCancel(error)) {\n        return;\n      }\n\n      setState({\n        articles: [],\n        status: 'ERROR',\n        error: error\n      });\n    });\n  }, [limit, query, state]);\n  return state;\n};\nexport const useDebounce = (value, delay = 500) => {\n  const [debouncedValue, setDebouncedValue] = useState(value);\n  useEffect(() => {\n    const timer = setTimeout(() => {\n      setDebouncedValue(value);\n    }, delay);\n    return () => {\n      clearTimeout(timer);\n    };\n  }, [value, delay]);\n  return debouncedValue;\n};\nexport const useSearchForm = () => {\n  const [searchValue, setSearchValue] = useState('');\n  const onSearchChange = useCallback(e => setSearchValue(e.target.value), []);\n  return {\n    searchValue,\n    onSearchChange\n  };\n};","map":{"version":3,"sources":["/Users/vijordan/Desktop/Victor/Studies/studies/Storybook/src/hooks.js"],"names":["useEffect","useState","useRef","useCallback","axios","useSearch","query","limit","state","setState","articles","status","error","cancelToken","length","current","cancel","CancelToken","source","get","token","then","response","parsedResponse","i","data","push","id","label","catch","isCancel","useDebounce","value","delay","debouncedValue","setDebouncedValue","timer","setTimeout","clearTimeout","useSearchForm","searchValue","setSearchValue","onSearchChange","e","target"],"mappings":"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","sourcesContent":["import {useEffect, useState, useRef, useCallback} from \"react\";\nimport axios from 'axios';\n\nexport const useSearch = (query = '', limit = 10) => {\n\n    const [state, setState] = useState({\n        articles: [],\n        status: 'IDLE',\n        error: ''\n    });\n\n    const cancelToken = useRef(null);\n\n    useEffect(() => {\n        if (query.length < 3) {\n            return;\n        }\n\n        if (cancelToken.current) {\n            cancelToken.current.cancel();\n        }\n\n\n        cancelToken.current = axios.CancelToken.source();\n\n        setState({...state, status: 'PENDING'});\n\n        axios.get(`https://en.wikipedia.org/w/api.php?origin=*&action=opensearch&search=${query}&limit=${limit}`, {\n            cancelToken: cancelToken.current.token\n        })\n            .then(function (response) {\n                const parsedResponse = [];\n\n                for (let i = 0; i < response.data[1].length; i++) {\n                    parsedResponse.push({\n                        id: response.data[3][i],\n                        label: response.data[1][i]\n                    })\n                }\n\n                setState({\n                    articles: parsedResponse,\n                    status: 'SUCCESS',\n                    error: ''\n                })\n            })\n            .catch(function (error) {\n                if (axios.isCancel(error)) {\n                    return\n                }\n\n                setState({\n                    articles: [],\n                    status: 'ERROR',\n                    error: error\n                });\n            })\n    }, [limit, query, state]);\n\n    return state;\n};\n\nexport const useDebounce = (value, delay = 500) => {\n    const [debouncedValue, setDebouncedValue] = useState(value);\n\n    useEffect(() => {\n        const timer = setTimeout(() => {\n            setDebouncedValue(value)\n        }, delay);\n\n        return () => {\n            clearTimeout(timer)\n        }\n    }, [value, delay]);\n\n    return debouncedValue\n};\n\nexport const useSearchForm = () => {\n    const [searchValue, setSearchValue] = useState('');\n\n    const onSearchChange  = useCallback((e) => setSearchValue(e.target.value), []);\n\n    return {\n        searchValue,\n        onSearchChange\n    }\n};"]},"metadata":{},"sourceType":"module"}